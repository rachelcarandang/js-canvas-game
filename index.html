<!DOCTYPE html>

<html>
<head>	
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>

	<style>
		@font-face {
			font-family: 'AmazonEmber';
			src: url('https://images-na.ssl-images-amazon.com/images/G/01/digital/music/player/font/amazonember_lt_base._V275201041_.ttf') 
		}

		@font-face {
			font-family: 'AmazonEmber';
			src: url('https://images-na.ssl-images-amazon.com/images/G/01/digital/music/player/font/amazonember_md_base._V275201045_.ttf');
			font-weight: bold;
		}

		body {
			background: -webkit-gradient(linear, left top, left bottom, from(black), to(gray)) fixed;
			color: white;
			font-family: 'AmazonEmber', 'HelveticaNeue-Light', 'Helvetica Neue Light', 'Helvetica Neue', Helvetica, Arial, 'Lucida Grande', sans-serif;
			padding: 0;
			margin: 0;
		}
		.container {
			position: fixed;
			width: 100%;
			height:100%;
			padding: 0;
			margin: 0;
		}

		.timer {
			position: relative;
			top: 15px;
			margin: 0 auto;
			background-color: rgba(255, 255, 255, .3);
			border-radius: 15px;
			height: 30px;
			width: 80px;
		}

		.secondsLeftText {
			position: static;
			font-size: 20px;
			text-align: center;
			vertical-align: center;
			margin-top: 5px;
		}

		.teamScoreText {
			font-size: 20px;
			top: 50px;
			text-align: center;
		}

		.team1Text {
			color: white;
			position: absolute; 
			width: auto;
			height: auto;
			left: 50px;
		}

		.team1Score {
			color: white;
			position: relative; 
			top: 15px;
		}

		.team2Text {
			color: white;
			position: absolute; 
			width: auto;
			height: auto;
			right: 50px;
			text-align: right;
		}

		.team2Score {
			color: white;
			position: relative; 
			top: 15px;
		}

		.teamSelected {
			color: #53aef5;
			text-decoration: underline;
		}

		.scoreSelected {
			color: #53aef5;
			text-decoration: none;
		}

		.displayContainer {
			position: relative;
			top: 150px;
			margin: 0 auto;
			height: auto;
			width: 400px;
			text-align: center;
			font-weight: bold;
			font-size: 20px;
		}

		/*https://stackoverflow.com/questions/6865194/fluid-width-with-equally-spaced-divs*/
		.optionsContainer {
			position: absolute;
			bottom: 10px;
			left: 10px;
			right: 10px;
			height: 50%;
			width: auto;
		}

		.optionBox {
			position: absolute;
			height: 47.5%;
			width: 49%;
			border: 2px solid gray;
			background-color: rgba(255, 255, 255, .15);;
		}

		.optionBoxA {
			left: 0;
			top: 0;
		}

		.optionBoxB {
			right: 0;
			top: 0;
		}

		.optionBoxC {
			left: 0;
			bottom: 0;
		}

		.optionBoxD {
			right: 0;
			bottom: 0;
		}

		.optionLetterText {
			position: absolute;
			font-size: 36px;
			top: 30px;
			left: 30px;
		}

		.optionValue {
			position: absolute;
			top: 80px;
			left: 30px;
		}
	</style>

</head>

<body>
	<!-- ALERTS: https://www.w3schools.com/howto/howto_js_alert.asp -->
	<div id="container" class="container">

		<div id="displayContainer" class="displayContainer">
			1 of 5
			<br>
			What song is this?
		</div>

		<div id="timer" class="timer">
			<div id="secondsLeftText" class="secondsLeftText">
			</div>
		</div>

		<div id="team1Text" class="teamScoreText team1Text">
			TEAM 1
			<div id="team1Score" class="teamScoreText">
				0
			</div>
		</div>

		<div id="team2Text" class="teamScoreText team2Text teamSelected">
			TEAM 2
			<div id="team2Score" class="teamScoreText scoreSelected">
				0
			</div>
		</div>

		<div id="optionsContainer" class="optionsContainer">
			<div id="optionBoxA" class="optionBox optionBoxA">
				<div id="optionLetterText" class="optionLetterText">
					A
				</div>
				<div id="answerOptionA" class="optionValue">
					Option Value
				</div>
			</div>

			<div id="optionBoxB" class="optionBox optionBoxB">
				<div id="optionLetterText" class="optionLetterText">
					B
				</div>
				<div id="answerOptionB" class="optionValue">
					Option Value
				</div>
			</div>

			<div id="optionBoxC" class="optionBox optionBoxC">
				<div id="optionLetterText" class="optionLetterText">
					C
				</div>
				<div id="answerOptionC" class="optionValue">
					Option Value
				</div>
			</div>

			<div id="optionBoxD" class="optionBox optionBoxD">
				<div id="optionLetterText" class="optionLetterText">
					D
				</div>
				<div id="answerOptionD" class="optionValue">
					Option Value
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">

	    var TeamID = {
	    	'One' : 'team1',
	    	'Two' : 'team2'
	    };

		function Team(id, name, score) {
			this.id = id;
			this.name = name;
			this.score = score;
		}

		function Game() {
			var team1 = new Team(TeamID.One, 'My Team 1', 0);
			var team2 = new Team(TeamID.Two, 'My Team 2', 0);
			this.teams = [ team1, team2 ];
			this.currentTeamGuessing = team1; 
			this.currentRound = 1;
			this.secondsLeftInRound = 30;
			this.currentRoundHasEnded = false;
		}

		Game.prototype.startGame = function() {
			console.log('Starting game. Round: ' + this.currentRound + ' Team Guessing: ' + this.currentTeamGuessing.id);
			this.model = new Model();
			var self = this;
			this.display = new Display(function(answerOptionValue) {
					self.onAnswerSelected(answerOptionValue);
				});
			this.display.displayNewRound(this.currentRound, this.currentTeamGuessing);
			this.setTimer();
		}

		Game.prototype.onAnswerSelected = function(answerOptionValue) {
			if (this.currentRoundHasEnded) {
				return;
			}
			console.log('option box selected: ' + answerOptionValue);
			var model = new Model();
			console.log('round', this.currentRound);
			console.log('team', this.currentTeamGuessing);
			if (answerOptionValue === model.rounds[this.currentRound].correctAnswer) {
				this.updateScoreOfCurrentTeamGuessing(this.currentTeamGuessing);
				alert('Correct!');
			} else {
				alert('False!');
			}
			this.currentRoundHasEnded = true;
		};

		Game.prototype.updateScoreOfCurrentTeamGuessing = function(team) {
			team.score++;
			this.display.updateTeamScore(team);
		};

		Game.prototype.setTimer = function() {
			var self = this;

			var intervalId = setInterval(function() {
				if (self.secondsLeft === 0) {
					self.onTimerEnded(intervalId);
				}
				document.getElementById('secondsLeftText').innerHTML = self.convertSecondsLeftToDisplayText(self.secondsLeftInRound);
				self.secondsLeftInRound--;

			}, 1000);
		};

		Game.prototype.convertSecondsLeftToDisplayText = function (secondsLeft) {
			var displayText;
			if (secondsLeft < 10) {
				return '00:0' + secondsLeft;
			} 
			return '00:' + secondsLeft;
		}

		Game.prototype.onTimerEnded = function(intervalId) {
			document.getElementById('secondsLeftText').innerHTML = '00:00';
			clearInterval(intervalId);
			alert('Time\'s up!');
		}

		function Display(onAnswerSelected) {
			this.onAnswerSelected = onAnswerSelected;
		}

		Display.prototype.displayNewRound = function(currentRound, currentTeamGuessing)
		{
			var model = new Model();
			this.displayConfiguration = model.rounds[currentRound];
			this.fillCardsWithAnswerOptions();
		}

		Display.prototype.fillCardsWithAnswerOptions = function() {
			this.setOnClickListenerOfElement('optionBoxA', this.displayConfiguration.answerOptionA);
			this.setOnClickListenerOfElement('optionBoxB', this.displayConfiguration.answerOptionB);
			this.setTextOfElement('answerOptionA', this.displayConfiguration.answerOptionA);
			this.setTextOfElement('answerOptionB', this.displayConfiguration.answerOptionB);
		};

		Display.prototype.updateTeamScore = function(team) {
			var score = team.score;
			if (team.id === TeamID.One) {
				this.setTextOfElement('team1Score', score);
			} else {
				this.setTextOfElement('team2Score', score);
			}
		}

		Display.prototype.setTextOfElement = function(elementId, text) {
			document.getElementById(elementId).innerHTML = text;
		}

		Display.prototype.setOnClickListenerOfElement = function(elementId, answerOptionValue) {
			var self = this;
			document.getElementById(elementId).addEventListener('click', function() {
					self.onAnswerSelected(answerOptionValue);
			});
		}

		function Model() {
			var round1 = new DisplayConfigurationRound1();
			var round2 = new DisplayConfigurationRound2();

			this.rounds = [ round1, round2 ];
		}

		function DisplayConfigurationRound1() {
			this.question = 'What song is this?';
			this.songUrl = '';
			this.answerOptionA = 'Love Story';
			this.answerOptionB = 'Viva La Vida';
			this.answerOptionC = 'You Really Got Me';
			this.answerOptionD = 'All Star';
			this.correctAnswer= this.answerOptionA;
		}

		function DisplayConfigurationRound2() {
			this.question = 'What song is this?';
			this.songUrl = '';
			this.answerOptionA = 'Hands To Myself';
			this.answerOptionB = 'What Makes You Beautiful';
			this.answerOptionC = 'Kiss Me';
			this.answerOptionD = 'Baby';
			this.correctAnswer = this.answerOptionB;
		}

		var game = new Game();
		game.startGame();

	</script>

</body>

</html>